<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>معلومات العضو</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family:"Cairo",sans-serif; background:linear-gradient(135deg,#0a0a0a,#1a1a1a); display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
.card-container { background:linear-gradient(160deg,#111,#000); border:2px solid #FFD700; border-radius:30px; padding:35px 25px; width:400px; max-width:90%; color:#FFD700; box-shadow:0 15px 35px rgba(255,215,0,0.4); text-align:center; }
.logo img { width:130px; height:130px; border-radius:50%; border:4px solid #FFD700; object-fit:cover; margin:0 auto 20px auto; display:block; box-shadow:0 8px 20px rgba(255,215,0,0.5); }
.card-info { margin:12px 0; font-size:1rem; display:flex; justify-content:space-between; padding:0 10px; }
.card-info strong { color:#FFD700; }
.card-info span { color:#fff; font-weight:500; }
.level { background:#FFD700; color:#000; font-weight:bold; padding:10px 20px; border-radius:14px; margin-top:15px; font-size:1.25rem; display:inline-block; }
.expiry { margin-top:10px; font-size:1rem; color:#ccc; }
</style>
</head>
<body>

<div class="card-container" id="memberCard">تحميل بيانات العضو...</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCoyCAdEmG9nSWmYhDTYtzkarNml2LOl5o",
  authDomain: "monex-academ.firebaseapp.com",
  projectId: "monex-academ",
  storageBucket: "monex-academ.firebasestorage.app",
  messagingSenderId: "739982923559",
  appId: "1:739982923559:web:47ebe50822acba14d3fb02",
  measurementId: "G-D7CGRPRKQE"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const params = new URLSearchParams(window.location.search);
const uid = params.get('id');
const container = document.getElementById("memberCard");

if (!uid) container.innerHTML = "معرّف العضو غير موجود!";
else {
  const userDocRef = doc(db,"users",uid);
  getDoc(userDocRef).then(docSnap => {
    if(docSnap.exists()){
      const data = docSnap.data();
      container.innerHTML = `
        <div class="logo">
          <img src="${data.photoURL || 'https://via.placeholder.com/130'}" alt="صورة العضو">
        </div>
        <div class="card-info"><strong>الاسم:</strong> <span>${data.displayName || "عضو"}</span></div>
        <div class="card-info"><strong>البريد:</strong> <span>${data.email}</span></div>
        <div class="card-info"><strong>رقم العضوية:</strong> <span>${uid.slice(0,6).toUpperCase()}</span></div>
        <div class="level">${data.membershipLevel || "غير محدد"}</div>
        <div class="expiry">انتهاء الاشتراك: ${data.expiryDate || "غير متاح"}</div>
      `;
    } else container.innerHTML = "المستخدم غير موجود!";
  });
}
</script>

</body>
</html>
