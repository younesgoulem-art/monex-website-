<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>الرئيسية | أكاديمية مونكس</title>
  <meta name="description" content="أكاديمية مونكس - دورات احترافية في التداول والاستثمار..." />
  <style>
    /* standard CSS + your original design */
    body { display: none; /* لإخفاء الصفحة مؤقتاً */ }
    /* ... كل CSS الأصلي كما هو ... */
    .login-modal { display: none; /* مخفي افتراضياً */ position: fixed; inset: 0;
      background: rgba(0,0,0,0.55); align-items: center; justify-content: center; z-index: 200;
    }
    .login-box { /* كما في تصميمك */ }
    /* إضافة تحسينات بسيطة */
  </style>
</head>
<body>
  <!-- ** بداية التصميم الأصلي (Navbar, hero, main content, footer) كما في ملفك ** -->
  <nav aria-label="التنقل الرئيسي">
    <!-- ... الكود الكامل كما أرسلته ... -->
  </nav>
  <!-- بقية الـ sections... -->
  <main class="container" aria-label="المحتوى الرئيسي">
    <!-- ... كامل المحتوى ... -->
  </main>
  <footer aria-label="تذييل الصفحة">
    <!-- ... footer content ... -->
  </footer>

  <!-- نموذج تسجيل الدخول -->
  <div class="login-modal" id="loginModal" aria-label="نموذج تسجيل الدخول">
    <div class="login-box" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
      <button class="close-login" aria-label="إغلاق" id="closeLogin">&times;</button>
      <h2 id="loginTitle">تسجيل الدخول</h2>
      <div class="error-msg" id="error-msg"></div>
      <form id="login-form" novalidate>
        <label for="email">البريد الإلكتروني</label>
        <input type="email" id="email" required autocomplete="username" />
        <label for="password">كلمة المرور</label>
        <input type="password" id="password" required autocomplete="current-password" />
        <button type="submit">دخول</button>
      </form>
      <p class="small" style="margin-top:8px;">إذا لم يكن لديك حساب، أنشئ واحداً أو تواصل معنا.</p>
    </div>
  </div>

  <!-- سكربت التنقل والمولد والإغلاق كما في نسختك -->
  <script>
    // نسخة مختصرة من سكربت القائمة والجوال والمودال (openLogin, closeLogin)
    /* ... تماماً كما في كودك السابق ... */
  </script>

  <!-- Firebase Authentication -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics.js";
    import {
      getAuth,
      onAuthStateChanged,
      signInWithEmailAndPassword,
      signOut
    } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCoyCAdEmG9nSWmYhDTYtzkarNml2LOl5o",
      authDomain: "monex-academ.firebaseapp.com",
      projectId: "monex-academ",
      storageBucket: "monex-academ.appspot.com",
      messagingSenderId: "739982923559",
      appId: "1:739982923559:web:47ebe50822acba14d3fb02",
      measurementId: "G-D7CGRPRKQE"
    };

    const app = initializeApp(firebaseConfig);
    getAnalytics(app);
    const auth = getAuth(app);

    const loginModal = document.getElementById("loginModal");
    const loginForm = document.getElementById("login-form");
    const errorMsg = document.getElementById("error-msg");

    onAuthStateChanged(auth, (user) => {
      document.body.style.display = "block";
      if (user) {
        loginModal.style.display = "none";
      } else {
        loginModal.style.display = "flex";
      }
    });

    loginForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      errorMsg.textContent = "";
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value;
      if (!email || !password) {
        errorMsg.textContent = "يرجى ملء جميع الحقول.";
        return;
      }
      try {
        await signInWithEmailAndPassword(auth, email, password);
      } catch (err) {
        if (err.code === "auth/user-not-found") errorMsg.textContent = "البريد الإلكتروني غير مسجل.";
        else if (err.code === "auth/wrong-password") errorMsg.textContent = "كلمة المرور غير صحيحة.";
        else if (err.code === "auth/invalid-email") errorMsg.textContent = "البريد الإلكتروني غير صالح.";
        else if (err.code === "auth/too-many-requests") errorMsg.textContent = "تم حظر المحاولة مؤقتاً.";
        else errorMsg.textContent = err.message;
      }
    });

    // زر الخروج (إذا ترغب بإضافته في التصميم الأساسي)
    // document.getElementById("logoutBtn")?.addEventListener("click", () => signOut(auth));
  </script>
</body>
</html>


